import{z as H,R as N,O as k,P as D,H as O,D as W,a as j,N as G}from"./three.module22.js";const c=[[1,1,0,0],[1,-1,0,0],[-1,1,0,0],[-1,-1,0,0],[1,0,1,0],[1,0,-1,0],[-1,0,1,0],[-1,0,-1,0],[0,1,1,0],[0,1,-1,0],[0,-1,1,0],[0,-1,-1,0],[1,0,0,1],[1,0,0,-1],[-1,0,0,1],[-1,0,0,-1],[0,1,0,1],[0,1,0,-1],[0,-1,0,1],[0,-1,0,-1],[0,0,1,1],[0,0,1,-1],[0,0,-1,1],[0,0,-1,-1]],w=[];function R(e,t){let a=0;for(let n=0;n<4;n++){const o=e[n]-t[n];a+=o*o}return a}for(let e=0;e<c.length;e++)for(let t=e+1;t<c.length;t++)Math.abs(R(c[e],c[t])-2)<.01&&w.push([e,t]);function J(e,t,a){const n=Array(4).fill(0).map(()=>Array(4).fill(0));for(let o=0;o<4;o++)n[o][o]=1;return n[e][e]=Math.cos(a),n[e][t]=-Math.sin(a),n[t][e]=Math.sin(a),n[t][t]=Math.cos(a),n}function K(e,t){const a=[0,0,0,0];for(let n=0;n<4;n++)for(let o=0;o<4;o++)a[n]+=e[n][o]*t[o];return a}function Q(e,t){const a=Array(4).fill(0).map(()=>Array(4).fill(0));for(let n=0;n<4;n++)for(let o=0;o<4;o++)for(let i=0;i<4;i++)a[n][o]+=e[n][i]*t[i][o];return a}function T(e){let t=e[0];for(let a=1;a<e.length;a++)t=Q(t,e[a]);return t}const U=5,y=7;function X(e,t=U){let a=t-e[3];return a<.1&&(a=.1),new G(e[0]*t/a*y,e[1]*t/a*y,e[2]*t/a*y)}const Y=[[0,1],[0,2],[0,3],[1,2],[1,3],[2,3]];let l=[0,0,0,0,0,0],P=[];for(let e=0;e<6;e++)P[e]=(Math.random()*.001+3e-4)*(Math.random()<.5?1:-1);window.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("bgCanvas"),t=new H({canvas:e,alpha:!0});t.setSize(window.innerWidth,window.innerHeight),t.setClearColor(0,0);const a=new N,n=new k(45,window.innerWidth/window.innerHeight,.1,1e3);n.position.set(0,0,8),n.fov=60,n.updateProjectionMatrix(),window.addEventListener("resize",()=>{t.setSize(window.innerWidth,window.innerHeight),n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix()});const o=new Float32Array(w.length*2*3),i=new D;i.setAttribute("position",new O(o,3));const m=new W({color:16777215,opacity:.8,transparent:!0}),L=new j(i,m);a.add(L);function q(h){const f=c.map(r=>X(K(h,r)));for(let r=0;r<w.length;r++){const[p,F]=w[r],b=f[p],g=f[F];o[r*6+0]=b.x,o[r*6+1]=b.y,o[r*6+2]=b.z,o[r*6+3]=g.x,o[r*6+4]=g.y,o[r*6+5]=g.z}i.attributes.position.needsUpdate=!0}function B(){requestAnimationFrame(B);const h=Y.map((r,p)=>J(r[0],r[1],l[p])),f=T(h);q(f);for(let r=0;r<l.length;r++)l[r]+=P[r],l[r]>Math.PI*2?l[r]-=Math.PI*2:l[r]<0&&(l[r]+=Math.PI*2);t.render(a,n)}B()});const z=window.AudioContext||window.webkitAudioContext;let s=null,d=null,u=null;const A=document.getElementById("presetSelect"),S=document.getElementById("baseFreq"),x=document.getElementById("binauralFreq"),M=document.getElementById("playBtn"),E=document.getElementById("stopBtn"),C=document.getElementById("silentAudio"),v={delta:{binaural:2.25,base:100},theta:{binaural:6,base:200},alpha:{binaural:10.5,base:400},beta:{binaural:21.5,base:500},gamma:{binaural:35,base:600}};A.addEventListener("change",()=>{const e=A.value;e&&v[e]&&(S.value=v[e].base,x.value=v[e].binaural)});function I(e,t){const a=s.createOscillator();a.type="sine",a.frequency.value=e;const n=s.createGain();n.gain.value=.5;const o=s.createStereoPanner();return o.pan.value=t,a.connect(n).connect(o).connect(s.destination),{osc:a,gainNode:n,panner:o}}function Z(){s||(s=new z),s.state==="suspended"&&s.resume();const e=Number(S.value),t=Number(x.value);if(e<30||e>1e3||t<.5||t>40){alert("Frequencies out of range");return}const a=e,n=e+t,o=I(a,-1),i=I(n,1);d=o.osc,u=i.osc,d.start(),u.start(),C.play().catch(m=>console.error("Silent audio playback failed:",m)),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:"Binaural Beats",artist:"Nymessence"})),M.disabled=!0,E.disabled=!1}function V(){d&&d.stop(),u&&u.stop(),d=null,u=null,C.pause(),M.disabled=!1,E.disabled=!0}M.addEventListener("click",()=>{s||(s=new z),Z()});E.addEventListener("click",()=>{V()});
//# sourceMappingURL=binaural2.js.map
