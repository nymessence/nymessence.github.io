import{S as H,u as N,O as k,P as O,H as W,f as j,d as U,N as D}from"./three.module22.js";const d=[[1,1,0,0],[1,-1,0,0],[-1,1,0,0],[-1,-1,0,0],[1,0,1,0],[1,0,-1,0],[-1,0,1,0],[-1,0,-1,0],[0,1,1,0],[0,1,-1,0],[0,-1,1,0],[0,-1,-1,0],[1,0,0,1],[1,0,0,-1],[-1,0,0,1],[-1,0,0,-1],[0,1,0,1],[0,1,0,-1],[0,-1,0,1],[0,-1,0,-1],[0,0,1,1],[0,0,1,-1],[0,0,-1,1],[0,0,-1,-1]],w=[];function G(e,t){let a=0;for(let n=0;n<4;n++){const o=e[n]-t[n];a+=o*o}return a}for(let e=0;e<d.length;e++)for(let t=e+1;t<d.length;t++)Math.abs(G(d[e],d[t])-2)<.01&&w.push([e,t]);function J(e,t,a){const n=Array(4).fill(0).map(()=>Array(4).fill(0));for(let o=0;o<4;o++)n[o][o]=1;return n[e][e]=Math.cos(a),n[e][t]=-Math.sin(a),n[t][e]=Math.sin(a),n[t][t]=Math.cos(a),n}function K(e,t){const a=[0,0,0,0];for(let n=0;n<4;n++)for(let o=0;o<4;o++)a[n]+=e[n][o]*t[o];return a}function Q(e,t){const a=Array(4).fill(0).map(()=>Array(4).fill(0));for(let n=0;n<4;n++)for(let o=0;o<4;o++)for(let r=0;r<4;r++)a[n][o]+=e[n][r]*t[r][o];return a}function R(e){let t=e[0];for(let a=1;a<e.length;a++)t=Q(t,e[a]);return t}const T=5,y=7;function V(e,t=T){let a=t-e[3];return a<.1&&(a=.1),new D(e[0]*t/a*y,e[1]*t/a*y,e[2]*t/a*y)}const X=[[0,1],[0,2],[0,3],[1,2],[1,3],[2,3]];let l=[0,0,0,0,0,0],S=[];for(let e=0;e<6;e++)S[e]=(Math.random()*.001+3e-4)*(Math.random()<.5?1:-1);window.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("bgCanvas"),t=new H({canvas:e,alpha:!0});t.setSize(window.innerWidth,window.innerHeight),t.setClearColor(0,0);const a=new N,n=new k(45,window.innerWidth/window.innerHeight,.1,1e3);n.position.set(0,0,8),n.fov=60,n.updateProjectionMatrix(),window.addEventListener("resize",()=>{t.setSize(window.innerWidth,window.innerHeight),n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix()});const o=new Float32Array(w.length*2*3),r=new O;r.setAttribute("position",new W(o,3));const m=new j({color:16777215,opacity:.8,transparent:!0}),q=new U(r,m);a.add(q);function z(h){const f=d.map(i=>V(K(h,i)));for(let i=0;i<w.length;i++){const[p,F]=w[i],b=f[p],g=f[F];o[i*6+0]=b.x,o[i*6+1]=b.y,o[i*6+2]=b.z,o[i*6+3]=g.x,o[i*6+4]=g.y,o[i*6+5]=g.z}r.attributes.position.needsUpdate=!0}function B(){requestAnimationFrame(B);const h=X.map((i,p)=>J(i[0],i[1],l[p])),f=R(h);z(f);for(let i=0;i<l.length;i++)l[i]+=S[i],l[i]>Math.PI*2?l[i]-=Math.PI*2:l[i]<0&&(l[i]+=Math.PI*2);t.render(a,n)}B()});const P=window.AudioContext||window.webkitAudioContext;let s=null,c=null,u=null;const A=document.getElementById("presetSelect"),x=document.getElementById("baseFreq"),C=document.getElementById("binauralFreq"),M=document.getElementById("playBtn"),E=document.getElementById("stopBtn"),L=document.getElementById("silentAudio"),v={delta:{binaural:2.25,base:100},theta:{binaural:6,base:200},alpha:{binaural:10.5,base:400},beta:{binaural:21.5,base:500},gamma:{binaural:35,base:600}};A.addEventListener("change",()=>{const e=A.value;e&&v[e]&&(x.value=v[e].base,C.value=v[e].binaural)});function I(e,t){const a=s.createOscillator();a.type="sine",a.frequency.value=e;const n=s.createGain();n.gain.value=.5;const o=s.createStereoPanner();return o.pan.value=t,a.connect(n).connect(o).connect(s.destination),{osc:a,gainNode:n,panner:o}}function Y(){s||(s=new P),s.state==="suspended"&&s.resume();const e=Number(x.value),t=Number(C.value);if(e<30||e>1e3||t<.5||t>40){alert("Frequencies out of range");return}const a=e,n=e+t,o=I(a,-1),r=I(n,1);c=o.osc,u=r.osc,c.start(),u.start(),L.play().catch(m=>console.error("Silent audio playback failed:",m)),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:"Binaural Beats",artist:"Nymessence"})),M.disabled=!0,E.disabled=!1}function Z(){c&&c.stop(),u&&u.stop(),c=null,u=null,L.pause(),M.disabled=!1,E.disabled=!0}M.addEventListener("click",()=>{s||(s=new P),Y()});E.addEventListener("click",()=>{Z()});
//# sourceMappingURL=binaural2.js.map
