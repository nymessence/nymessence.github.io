{"version":3,"file":"fractal2.js","sources":["../../assets/fractal2.js"],"sourcesContent":["const c=document.getElementById(\"fractalCanvas\"),I=c.getContext(\"2d\"),S=document.getElementById(\"funcInput\"),U=document.getElementById(\"cReal\"),Z=document.getElementById(\"cImag\"),_=document.getElementById(\"iterations\"),$=document.getElementById(\"gradient\"),tt=document.getElementById(\"resetView\");let o=window.innerWidth,s=window.innerHeight;c.width=o;c.height=s;let f=0,g=0,a=4/o,u=!1,v={x:0,y:0},n={x:0,y:0},d={x:0,y:0},x=!1;const X=document.createElement(\"canvas\"),O=X.getContext(\"2d\");X.width=o;X.height=s;let B=!1,V=0,H=null,p=1,L={x:0,y:0},F=null;function A(t,e){const l=e.clientX-t.clientX,h=e.clientY-t.clientY;return Math.sqrt(l*l+h*h)}function G(t,e){return{x:(t.clientX+e.clientX)/2,y:(t.clientY+e.clientY)/2}}function et(t){try{let e=t.replace(/\\^/g,\"**\");return math.compile(e)}catch(e){return alert(\"Invalid formula: \"+e),null}}function P(t){t=t.replace(\"#\",\"\"),t.length===3&&(t=t.split(\"\").map(l=>l+l).join(\"\"));const e=parseInt(t,16);return[e>>16&255,e>>8&255,e&255]}function nt(t,e){let l=[];for(let h=0;h<e;h++){let D=h/(e-1)*(t.length-1),Y=Math.floor(D),M=Math.min(Y+1,t.length-1),y=D-Y,m=P(t[Y]),r=P(t[M]);l.push([Math.round(m[0]+y*(r[0]-m[0])),Math.round(m[1]+y*(r[1]-m[1])),Math.round(m[2]+y*(r[2]-m[2]))])}return l}async function w(){x=!0;const t=et(S.value);if(!t){x=!1;return}const e=parseFloat(U.value),l=parseFloat(Z.value),h=parseInt(_.value),D=$.value.split(\",\").map(r=>r.trim()),Y=nt(D,h+1),M=O.createImageData(o,s),y=M.data,m=50;for(let r=0;r<s;r+=m){const J=Math.min(r+m,s);for(let E=r;E<J;E++)for(let C=0;C<o;C++){let K=f+(C-o/2)*a,N=g+(E-s/2)*a,T=K,k=N,R=0;for(;R<h;){let Q={z:math.complex(T,k),c:math.complex(e,l)},q=t.evaluate(Q);if(T=q.re,k=q.im,T*T+k*k>4)break;R++}let W=Y[R]||[0,0,0],z=4*(E*o+C);y[z]=W[0],y[z+1]=W[1],y[z+2]=W[2],y[z+3]=255}O.putImageData(M,0,0),await new Promise(E=>setTimeout(E,0))}x=!1,n.x=0,n.y=0}function i(t=1,e=0,l=0){I.clearRect(0,0,o,s),I.save(),I.translate(e,l),I.scale(t,t),I.drawImage(X,0,0),I.restore()}c.addEventListener(\"mousedown\",t=>{u=!0,v.x=t.clientX,v.y=t.clientY,d.x=f,d.y=g,x||(n.x=0,n.y=0)});c.addEventListener(\"mousemove\",t=>{u&&(n.x=t.clientX-v.x,n.y=t.clientY-v.y,i(1,n.x,n.y))});c.addEventListener(\"mouseup\",t=>{u&&(x||(f=d.x-n.x*a,g=d.y-n.y*a,n.x=0,n.y=0,w(),i()),u=!1)});c.addEventListener(\"mouseleave\",()=>{u&&(x||(f=d.x-n.x*a,g=d.y-n.y*a,n.x=0,n.y=0,w(),i()),u=!1)});let b=1,j=null;c.addEventListener(\"wheel\",t=>{t.preventDefault();const e=t.deltaY<0?.9:1.1;a/=e,b*=e,i(b),j&&clearTimeout(j),j=setTimeout(()=>{b=1,w(),i()},300)});c.addEventListener(\"touchstart\",t=>{t.preventDefault(),t.touches.length===1?(u=!0,v.x=t.touches[0].clientX,v.y=t.touches[0].clientY,d.x=f,d.y=g,x||(n.x=0,n.y=0),B=!1):t.touches.length===2&&(u=!1,B=!0,V=A(t.touches[0],t.touches[1]),H=G(t.touches[0],t.touches[1]),p=1,L={x:0,y:0},F=H)});c.addEventListener(\"touchmove\",t=>{if(t.preventDefault(),t.touches.length===1&&u)n.x=t.touches[0].clientX-v.x,n.y=t.touches[0].clientY-v.y,i(1,n.x,n.y);else if(t.touches.length===2&&B){const e=A(t.touches[0],t.touches[1]),l=G(t.touches[0],t.touches[1]);p=e/V,L.x+=l.x-F.x,L.y+=l.y-F.y,F=l,i(p,L.x,L.y)}});c.addEventListener(\"touchend\",t=>{if(t.preventDefault(),u&&(x||(f=d.x-n.x*a,g=d.y-n.y*a,n.x=0,n.y=0,w(),i()),u=!1),B&&t.touches.length<2){const e=H.x-o/2,l=H.y-s/2;a/=p,f+=e*(a-a*p),g+=l*(a-a*p),p=1,L={x:0,y:0},B=!1,w(),i()}});tt.addEventListener(\"click\",()=>{f=0,g=0,a=4/o,w(),i()});window.addEventListener(\"resize\",()=>{o=window.innerWidth,s=window.innerHeight,c.width=o,c.height=s,X.width=o,X.height=s,a=4/o,w(),i()});window.addEventListener(\"DOMContentLoaded\",()=>{w(),i()});\n//# sourceMappingURL=fractal2.js.map\n"],"names":["tt","X","B","t","e","et","nt","D","Y","M"],"mappings":"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"}