{"version":3,"file":"fractal2.js","sources":["../../assets/fractal2.js"],"sourcesContent":["const o=document.getElementById(\"fractalCanvas\"),C=o.getContext(\"2d\"),N=document.getElementById(\"funcInput\"),Q=document.getElementById(\"cReal\"),U=document.getElementById(\"cImag\"),_=document.getElementById(\"iterations\"),$=document.getElementById(\"gradient\"),tt=document.getElementById(\"resetView\");let c=window.innerWidth,s=window.innerHeight;o.width=c;o.height=s;let m=0,y=0,a=4/c,u=!1,g={x:0,y:0},n={x:0,y:0},d={x:0,y:0},f=!1;const Y=document.createElement(\"canvas\"),j=Y.getContext(\"2d\");Y.width=c;Y.height=s;let X=!1,G=0,R=null,p=1,L={x:0,y:0},O=null;function V(t,e){const l=e.clientX-t.clientX,h=e.clientY-t.clientY;return Math.sqrt(l*l+h*h)}function Z(t,e){return{x:(t.clientX+e.clientX)/2,y:(t.clientY+e.clientY)/2}}function et(t){try{let e=t.replace(/\\^/g,\"**\");return math.compile(e)}catch(e){return alert(\"Invalid formula: \"+e),null}}function q(t){t=t.replace(\"#\",\"\"),t.length===3&&(t=t.split(\"\").map(l=>l+l).join(\"\"));const e=parseInt(t,16);return[e>>16&255,e>>8&255,e&255]}function nt(t,e){let l=[];for(let h=0;h<e;h++){let T=h/(e-1)*(t.length-1),v=Math.floor(T),w=Math.min(v+1,t.length-1),I=T-v,i=q(t[v]),D=q(t[w]);l.push([Math.round(i[0]+I*(D[0]-i[0])),Math.round(i[1]+I*(D[1]-i[1])),Math.round(i[2]+I*(D[2]-i[2]))])}return l}async function x(){f=!0;const t=et(N.value);if(!t){f=!1;return}const e=parseFloat(Q.value),l=parseFloat(U.value),h=parseInt(_.value),P=$.value.split(\",\").map(i=>i.trim()),T=nt(P,h+1),v=j.createImageData(c,s),w=v.data,I=50;for(let i=0;i<s;i+=I){const D=Math.min(i+I,s);for(let E=i;E<D;E++)for(let B=0;B<c;B++){let A=m+(B-c/2)*a,J=y+(E-s/2)*a,M=A,z=J,S=0;for(;S<h;){let K={z:math.complex(M,z),c:math.complex(e,l)},W=t.evaluate(K);if(M=W.re,z=W.im,M*M+z*z>4)break;S++}let k=T[S]||[0,0,0],F=4*(E*c+B);w[F]=k[0],w[F+1]=k[1],w[F+2]=k[2],w[F+3]=255}j.putImageData(v,0,0),await new Promise(E=>setTimeout(E,0))}f=!1,n.x=0,n.y=0}function r(t=1,e=0,l=0){C.clearRect(0,0,c,s),C.save(),C.translate(e,l),C.scale(t,t),C.drawImage(Y,0,0),C.restore()}o.addEventListener(\"mousedown\",t=>{u=!0,g.x=t.clientX,g.y=t.clientY,d.x=m,d.y=y,f||(n.x=0,n.y=0)});o.addEventListener(\"mousemove\",t=>{u&&(n.x=t.clientX-g.x,n.y=t.clientY-g.y,r(1,n.x,n.y))});o.addEventListener(\"mouseup\",t=>{u&&(f||(m=d.x-n.x*a,y=d.y-n.y*a,n.x=0,n.y=0,x(),r()),u=!1)});o.addEventListener(\"mouseleave\",()=>{u&&(f||(m=d.x-n.x*a,y=d.y-n.y*a,n.x=0,n.y=0,x(),r()),u=!1)});let b=1,H=null;o.addEventListener(\"wheel\",t=>{t.preventDefault();const e=t.deltaY<0?.9:1.1;a/=e,b*=e,r(b),H&&clearTimeout(H),H=setTimeout(()=>{b=1,x(),r()},300)});o.addEventListener(\"touchstart\",t=>{t.preventDefault(),t.touches.length===1?(u=!0,g.x=t.touches[0].clientX,g.y=t.touches[0].clientY,d.x=m,d.y=y,f||(n.x=0,n.y=0),X=!1):t.touches.length===2&&(u=!1,X=!0,G=V(t.touches[0],t.touches[1]),R=Z(t.touches[0],t.touches[1]),p=1,L={x:0,y:0},O=R)});o.addEventListener(\"touchmove\",t=>{if(t.preventDefault(),t.touches.length===1&&u)n.x=t.touches[0].clientX-g.x,n.y=t.touches[0].clientY-g.y,r(1,n.x,n.y);else if(t.touches.length===2&&X){const e=V(t.touches[0],t.touches[1]),l=Z(t.touches[0],t.touches[1]);p=e/G,L.x+=l.x-O.x,L.y+=l.y-O.y,O=l,r(p,L.x,L.y)}});o.addEventListener(\"touchend\",t=>{if(t.preventDefault(),u&&(f||(m=d.x-n.x*a,y=d.y-n.y*a,n.x=0,n.y=0,x(),r()),u=!1),X&&t.touches.length<2){const e=R.x-c/2,l=R.y-s/2;a/=p,m+=e*(a-a*p),y+=l*(a-a*p),p=1,L={x:0,y:0},X=!1,x(),r()}});tt.addEventListener(\"click\",()=>{m=0,y=0,a=4/c,x(),r()});window.addEventListener(\"resize\",()=>{c=window.innerWidth,s=window.innerHeight,o.width=c,o.height=s,Y.width=c,Y.height=s,a=4/c,x(),r()});window.addEventListener(\"DOMContentLoaded\",()=>{x(),r()});\n//# sourceMappingURL=fractal2.js.map\n"],"names":["o","C","N","Q","U","tt","s","m","y","a","u","g","f","j","X","G","R","O","V","t","e","Z","et","q","nt","T","v","w","I","i","D","x","P","B","A","J","M","z","S","K","W","k","F","r","H"],"mappings":"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"}