import"./modulepreload-polyfill.js";import{E as fo,V as H,M as Ie,T as Le,S as fn,Q as dn,a as W,W as Cn,b as In,P as Ln,B as Tn,c as Sn,L as $n,d as Dn,A as ho,D as mo,G as Bt,C as kn,e as qe,f as Ue,g as po,O as go,h as yo}from"./pascals-pyramid.js";import{create as wo}from"https://cdn.jsdelivr.net/npm/ipfs-http-client@59.0.0/+esm";const hn={type:"change"},Pt={type:"start"},mn={type:"end"};class bo extends fo{constructor(n,o){super(),this.object=n,this.domElement=o,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new H,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Ie.ROTATE,MIDDLE:Ie.DOLLY,RIGHT:Ie.PAN},this.touches={ONE:Le.ROTATE,TWO:Le.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return r.phi},this.getAzimuthalAngle=function(){return r.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(i){i.addEventListener("keydown",sn),this._domElementKeyEvents=i},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(hn),e.update(),s=a.NONE},this.update=(function(){const i=new H,d=new dn().setFromUnitVectors(n.up,new H(0,1,0)),P=d.clone().invert(),I=new H,B=new dn,Ce=2*Math.PI;return function(){const un=e.object.position;i.copy(un).sub(e.target),i.applyQuaternion(d),r.setFromVector3(i),e.autoRotate&&s===a.NONE&&ye(rt()),e.enableDamping?(r.theta+=l.theta*e.dampingFactor,r.phi+=l.phi*e.dampingFactor):(r.theta+=l.theta,r.phi+=l.phi);let J=e.minAzimuthAngle,ee=e.maxAzimuthAngle;return isFinite(J)&&isFinite(ee)&&(J<-Math.PI?J+=Ce:J>Math.PI&&(J-=Ce),ee<-Math.PI?ee+=Ce:ee>Math.PI&&(ee-=Ce),J<=ee?r.theta=Math.max(J,Math.min(ee,r.theta)):r.theta=r.theta>(J+ee)/2?Math.max(J,r.theta):Math.min(ee,r.theta)),r.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,r.phi)),r.makeSafe(),r.radius*=f,r.radius=Math.max(e.minDistance,Math.min(e.maxDistance,r.radius)),e.enableDamping===!0?e.target.addScaledVector(h,e.dampingFactor):e.target.add(h),i.setFromSpherical(r),i.applyQuaternion(P),un.copy(e.target).add(i),e.object.lookAt(e.target),e.enableDamping===!0?(l.theta*=1-e.dampingFactor,l.phi*=1-e.dampingFactor,h.multiplyScalar(1-e.dampingFactor)):(l.set(0,0,0),h.set(0,0,0)),f=1,p||I.distanceToSquared(e.object.position)>c||8*(1-B.dot(e.object.quaternion))>c?(e.dispatchEvent(hn),I.copy(e.object.position),B.copy(e.object.quaternion),p=!1,!0):!1}})(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",rn),e.domElement.removeEventListener("pointerdown",nn),e.domElement.removeEventListener("pointercancel",on),e.domElement.removeEventListener("wheel",an),e.domElement.removeEventListener("pointermove",xt),e.domElement.removeEventListener("pointerup",Et),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",sn)};const e=this,a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=a.NONE;const c=1e-6,r=new fn,l=new fn;let f=1;const h=new H;let p=!1;const u=new W,g=new W,C=new W,v=new W,E=new W,$=new W,z=new W,O=new W,Q=new W,m=[],D={};function rt(){return 2*Math.PI/60/60*e.autoRotateSpeed}function ge(){return Math.pow(.95,e.zoomSpeed)}function ye(i){l.theta-=i}function we(i){l.phi-=i}const He=(function(){const i=new H;return function(P,I){i.setFromMatrixColumn(I,0),i.multiplyScalar(-P),h.add(i)}})(),Fe=(function(){const i=new H;return function(P,I){e.screenSpacePanning===!0?i.setFromMatrixColumn(I,1):(i.setFromMatrixColumn(I,0),i.crossVectors(e.object.up,i)),i.multiplyScalar(P),h.add(i)}})(),Pe=(function(){const i=new H;return function(P,I){const B=e.domElement;if(e.object.isPerspectiveCamera){const Ce=e.object.position;i.copy(Ce).sub(e.target);let lt=i.length();lt*=Math.tan(e.object.fov/2*Math.PI/180),He(2*P*lt/B.clientHeight,e.object.matrix),Fe(2*I*lt/B.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(He(P*(e.object.right-e.object.left)/e.object.zoom/B.clientWidth,e.object.matrix),Fe(I*(e.object.top-e.object.bottom)/e.object.zoom/B.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function Mt(i){e.object.isPerspectiveCamera?f/=i:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*i)),e.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function qt(i){e.object.isPerspectiveCamera?f*=i:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/i)),e.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function Ut(i){u.set(i.clientX,i.clientY)}function Zn(i){z.set(i.clientX,i.clientY)}function Kt(i){v.set(i.clientX,i.clientY)}function Vn(i){g.set(i.clientX,i.clientY),C.subVectors(g,u).multiplyScalar(e.rotateSpeed);const d=e.domElement;ye(2*Math.PI*C.x/d.clientHeight),we(2*Math.PI*C.y/d.clientHeight),u.copy(g),e.update()}function Qn(i){O.set(i.clientX,i.clientY),Q.subVectors(O,z),Q.y>0?Mt(ge()):Q.y<0&&qt(ge()),z.copy(O),e.update()}function Jn(i){E.set(i.clientX,i.clientY),$.subVectors(E,v).multiplyScalar(e.panSpeed),Pe($.x,$.y),v.copy(E),e.update()}function eo(i){i.deltaY<0?qt(ge()):i.deltaY>0&&Mt(ge()),e.update()}function to(i){let d=!1;switch(i.code){case e.keys.UP:i.ctrlKey||i.metaKey||i.shiftKey?we(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):Pe(0,e.keyPanSpeed),d=!0;break;case e.keys.BOTTOM:i.ctrlKey||i.metaKey||i.shiftKey?we(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):Pe(0,-e.keyPanSpeed),d=!0;break;case e.keys.LEFT:i.ctrlKey||i.metaKey||i.shiftKey?ye(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):Pe(e.keyPanSpeed,0),d=!0;break;case e.keys.RIGHT:i.ctrlKey||i.metaKey||i.shiftKey?ye(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):Pe(-e.keyPanSpeed,0),d=!0;break}d&&(i.preventDefault(),e.update())}function Zt(){if(m.length===1)u.set(m[0].pageX,m[0].pageY);else{const i=.5*(m[0].pageX+m[1].pageX),d=.5*(m[0].pageY+m[1].pageY);u.set(i,d)}}function Vt(){if(m.length===1)v.set(m[0].pageX,m[0].pageY);else{const i=.5*(m[0].pageX+m[1].pageX),d=.5*(m[0].pageY+m[1].pageY);v.set(i,d)}}function Qt(){const i=m[0].pageX-m[1].pageX,d=m[0].pageY-m[1].pageY,P=Math.sqrt(i*i+d*d);z.set(0,P)}function no(){e.enableZoom&&Qt(),e.enablePan&&Vt()}function oo(){e.enableZoom&&Qt(),e.enableRotate&&Zt()}function Jt(i){if(m.length==1)g.set(i.pageX,i.pageY);else{const P=vt(i),I=.5*(i.pageX+P.x),B=.5*(i.pageY+P.y);g.set(I,B)}C.subVectors(g,u).multiplyScalar(e.rotateSpeed);const d=e.domElement;ye(2*Math.PI*C.x/d.clientHeight),we(2*Math.PI*C.y/d.clientHeight),u.copy(g)}function en(i){if(m.length===1)E.set(i.pageX,i.pageY);else{const d=vt(i),P=.5*(i.pageX+d.x),I=.5*(i.pageY+d.y);E.set(P,I)}$.subVectors(E,v).multiplyScalar(e.panSpeed),Pe($.x,$.y),v.copy(E)}function tn(i){const d=vt(i),P=i.pageX-d.x,I=i.pageY-d.y,B=Math.sqrt(P*P+I*I);O.set(0,B),Q.set(0,Math.pow(O.y/z.y,e.zoomSpeed)),Mt(Q.y),z.copy(O)}function ao(i){e.enableZoom&&tn(i),e.enablePan&&en(i)}function io(i){e.enableZoom&&tn(i),e.enableRotate&&Jt(i)}function nn(i){e.enabled!==!1&&(m.length===0&&(e.domElement.setPointerCapture(i.pointerId),e.domElement.addEventListener("pointermove",xt),e.domElement.addEventListener("pointerup",Et)),uo(i),i.pointerType==="touch"?lo(i):so(i))}function xt(i){e.enabled!==!1&&(i.pointerType==="touch"?co(i):ro(i))}function Et(i){ln(i),m.length===0&&(e.domElement.releasePointerCapture(i.pointerId),e.domElement.removeEventListener("pointermove",xt),e.domElement.removeEventListener("pointerup",Et)),e.dispatchEvent(mn),s=a.NONE}function on(i){ln(i)}function so(i){let d;switch(i.button){case 0:d=e.mouseButtons.LEFT;break;case 1:d=e.mouseButtons.MIDDLE;break;case 2:d=e.mouseButtons.RIGHT;break;default:d=-1}switch(d){case Ie.DOLLY:if(e.enableZoom===!1)return;Zn(i),s=a.DOLLY;break;case Ie.ROTATE:if(i.ctrlKey||i.metaKey||i.shiftKey){if(e.enablePan===!1)return;Kt(i),s=a.PAN}else{if(e.enableRotate===!1)return;Ut(i),s=a.ROTATE}break;case Ie.PAN:if(i.ctrlKey||i.metaKey||i.shiftKey){if(e.enableRotate===!1)return;Ut(i),s=a.ROTATE}else{if(e.enablePan===!1)return;Kt(i),s=a.PAN}break;default:s=a.NONE}s!==a.NONE&&e.dispatchEvent(Pt)}function ro(i){switch(s){case a.ROTATE:if(e.enableRotate===!1)return;Vn(i);break;case a.DOLLY:if(e.enableZoom===!1)return;Qn(i);break;case a.PAN:if(e.enablePan===!1)return;Jn(i);break}}function an(i){e.enabled===!1||e.enableZoom===!1||s!==a.NONE||(i.preventDefault(),e.dispatchEvent(Pt),eo(i),e.dispatchEvent(mn))}function sn(i){e.enabled===!1||e.enablePan===!1||to(i)}function lo(i){switch(cn(i),m.length){case 1:switch(e.touches.ONE){case Le.ROTATE:if(e.enableRotate===!1)return;Zt(),s=a.TOUCH_ROTATE;break;case Le.PAN:if(e.enablePan===!1)return;Vt(),s=a.TOUCH_PAN;break;default:s=a.NONE}break;case 2:switch(e.touches.TWO){case Le.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;no(),s=a.TOUCH_DOLLY_PAN;break;case Le.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;oo(),s=a.TOUCH_DOLLY_ROTATE;break;default:s=a.NONE}break;default:s=a.NONE}s!==a.NONE&&e.dispatchEvent(Pt)}function co(i){switch(cn(i),s){case a.TOUCH_ROTATE:if(e.enableRotate===!1)return;Jt(i),e.update();break;case a.TOUCH_PAN:if(e.enablePan===!1)return;en(i),e.update();break;case a.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;ao(i),e.update();break;case a.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;io(i),e.update();break;default:s=a.NONE}}function rn(i){e.enabled!==!1&&i.preventDefault()}function uo(i){m.push(i)}function ln(i){delete D[i.pointerId];for(let d=0;d<m.length;d++)if(m[d].pointerId==i.pointerId){m.splice(d,1);return}}function cn(i){let d=D[i.pointerId];d===void 0&&(d=new W,D[i.pointerId]=d),d.set(i.pageX,i.pageY)}function vt(i){const d=i.pointerId===m[0].pointerId?m[1]:m[0];return D[d.pointerId]}e.domElement.addEventListener("contextmenu",rn),e.domElement.addEventListener("pointerdown",nn),e.domElement.addEventListener("pointercancel",on),e.domElement.addEventListener("wheel",an,{passive:!1}),this.update()}}const _e=[[1,1,0,0],[1,-1,0,0],[-1,1,0,0],[-1,-1,0,0],[1,0,1,0],[1,0,-1,0],[-1,0,1,0],[-1,0,-1,0],[0,1,1,0],[0,1,-1,0],[0,-1,1,0],[0,-1,-1,0],[1,0,0,1],[1,0,0,-1],[-1,0,0,1],[-1,0,0,-1],[0,1,0,1],[0,1,0,-1],[0,-1,0,1],[0,-1,0,-1],[0,0,1,1],[0,0,1,-1],[0,0,-1,1],[0,0,-1,-1]],ct=[];function Mo(t,n){let o=0;for(let e=0;e<4;e++){const a=t[e]-n[e];o+=a*a}return o}for(let t=0;t<_e.length;t++)for(let n=t+1;n<_e.length;n++)Math.abs(Mo(_e[t],_e[n])-2)<.01&&ct.push([t,n]);function xo(t,n,o){const e=Array(4).fill(0).map(()=>Array(4).fill(0));for(let a=0;a<4;a++)e[a][a]=1;return e[t][t]=Math.cos(o),e[t][n]=-Math.sin(o),e[n][t]=Math.sin(o),e[n][n]=Math.cos(o),e}function Eo(t,n){const o=[0,0,0,0];for(let e=0;e<4;e++)for(let a=0;a<4;a++)o[e]+=t[e][a]*n[a];return o}function vo(t,n){const o=Array(4).fill(0).map(()=>Array(4).fill(0));for(let e=0;e<4;e++)for(let a=0;a<4;a++)for(let s=0;s<4;s++)o[e][a]+=t[e][s]*n[s][a];return o}function Po(t){let n=t[0];for(let o=1;o<t.length;o++)n=vo(n,t[o]);return n}const Co=5,Ct=7;function Io(t,n=Co){let o=n-t[3];return o<.1&&(o=.1),new H(t[0]*n/o*Ct,t[1]*n/o*Ct,t[2]*n/o*Ct)}const Lo=[[0,1],[0,2],[0,3],[1,2],[1,3],[2,3]];let be=[0,0,0,0,0,0],An=[];for(let t=0;t<6;t++)An[t]=(Math.random()*.001+3e-4)*(Math.random()<.5?1:-1);window.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("bgCanvas"),n=new Cn({canvas:t,alpha:!0});n.setSize(window.innerWidth,window.innerHeight),n.setClearColor(0,0);const o=new In,e=new Ln(45,window.innerWidth/window.innerHeight,.1,1e3);e.position.set(0,0,8),e.fov=60,e.updateProjectionMatrix(),window.addEventListener("resize",()=>{n.setSize(window.innerWidth,window.innerHeight),e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix()});const a=new Float32Array(ct.length*2*3),s=new Tn;s.setAttribute("position",new Sn(a,3));const c=new $n({color:16777215,opacity:.8,transparent:!0}),r=new Dn(s,c);o.add(r);function l(h){const p=_e.map(u=>Io(Eo(h,u)));for(let u=0;u<ct.length;u++){const[g,C]=ct[u],v=p[g],E=p[C];a[u*6+0]=v.x,a[u*6+1]=v.y,a[u*6+2]=v.z,a[u*6+3]=E.x,a[u*6+4]=E.y,a[u*6+5]=E.z}s.attributes.position.needsUpdate=!0}function f(){requestAnimationFrame(f);const h=Lo.map((u,g)=>xo(u[0],u[1],be[g])),p=Po(h);l(p);for(let u=0;u<be.length;u++)be[u]+=An[u],be[u]>Math.PI*2?be[u]-=Math.PI*2:be[u]<0&&(be[u]+=Math.PI*2);n.render(o,e)}f()});const On=window.AudioContext||window.webkitAudioContext;let U=null,Ke=null,Ze=null;const pn=document.getElementById("presetSelect"),Yn=document.getElementById("baseFreq"),Rn=document.getElementById("binauralFreq"),Ht=document.getElementById("playBtn"),Ft=document.getElementById("stopBtn"),zn=document.getElementById("silentAudio"),It={delta:{binaural:2.25,base:100},theta:{binaural:6,base:200},alpha:{binaural:10.5,base:400},beta:{binaural:21.5,base:500},gamma:{binaural:35,base:600}};pn.addEventListener("change",()=>{const t=pn.value;t&&It[t]&&(Yn.value=It[t].base,Rn.value=It[t].binaural)});function gn(t,n){const o=U.createOscillator();o.type="sine",o.frequency.value=t;const e=U.createGain();e.gain.value=.5;const a=U.createStereoPanner();return a.pan.value=n,o.connect(e).connect(a).connect(U.destination),{osc:o,gainNode:e,panner:a}}function To(){U||(U=new On),U.state==="suspended"&&U.resume();const t=Number(Yn.value),n=Number(Rn.value);if(t<30||t>1e3||n<.5||n>40){alert("Frequencies out of range");return}const o=t,e=t+n,a=gn(o,-1),s=gn(e,1);Ke=a.osc,Ze=s.osc,Ke.start(),Ze.start(),zn.play().catch(c=>console.error("Silent audio playback failed:",c)),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:"Binaural Beats",artist:"Nymessence"})),Ht.disabled=!0,Ft.disabled=!1}function So(){Ke&&Ke.stop(),Ze&&Ze.stop(),Ke=null,Ze=null,zn.pause(),Ht.disabled=!1,Ft.disabled=!0}Ht.addEventListener("click",()=>{U||(U=new On),To()});Ft.addEventListener("click",()=>{So()});const R=document.getElementById("fractalCanvas"),Te=R.getContext("2d"),$o=document.getElementById("funcInput"),Do=document.getElementById("cReal"),ko=document.getElementById("cImag"),Ao=document.getElementById("iterations"),Oo=document.getElementById("gradient"),Yo=document.getElementById("resetView");let A=window.innerWidth,F=window.innerHeight;R.width=A;R.height=F;let fe=0,de=0,L=4/A,_=!1,he={x:0,y:0},M={x:0,y:0},V={x:0,y:0},re=!1;const Ye=document.createElement("canvas"),yn=Ye.getContext("2d");Ye.width=A;Ye.height=F;let Qe=!1,Nn=0,wt=null,Me=1,$e={x:0,y:0},ut=null;function Xn(t,n){const o=n.clientX-t.clientX,e=n.clientY-t.clientY;return Math.sqrt(o*o+e*e)}function jn(t,n){return{x:(t.clientX+n.clientX)/2,y:(t.clientY+n.clientY)/2}}function Ro(t){try{let n=t.replace(/\^/g,"**");return math.compile(n)}catch(n){return alert("Invalid formula: "+n),null}}function wn(t){t=t.replace("#",""),t.length===3&&(t=t.split("").map(o=>o+o).join(""));const n=parseInt(t,16);return[n>>16&255,n>>8&255,n&255]}function zo(t,n){let o=[];for(let e=0;e<n;e++){let s=e/(n-1)*(t.length-1),c=Math.floor(s),r=Math.min(c+1,t.length-1),l=s-c,f=wn(t[c]),h=wn(t[r]);o.push([Math.round(f[0]+l*(h[0]-f[0])),Math.round(f[1]+l*(h[1]-f[1])),Math.round(f[2]+l*(h[2]-f[2]))])}return o}async function me(){re=!0;const t=Ro($o.value);if(!t){re=!1;return}const n=parseFloat(Do.value),o=parseFloat(ko.value),e=parseInt(Ao.value),a=Oo.value.split(",").map(f=>f.trim()),s=zo(a,e+1),c=yn.createImageData(A,F),r=c.data,l=50;for(let f=0;f<F;f+=l){const h=Math.min(f+l,F);for(let p=f;p<h;p++)for(let u=0;u<A;u++){let g=fe+(u-A/2)*L,C=de+(p-F/2)*L,v=g,E=C,$=0;for(;$<e;){let Q={z:math.complex(v,E),c:math.complex(n,o)},m=t.evaluate(Q);if(v=m.re,E=m.im,v*v+E*E>4)break;$++}let z=s[$]||[0,0,0],O=4*(p*A+u);r[O]=z[0],r[O+1]=z[1],r[O+2]=z[2],r[O+3]=255}yn.putImageData(c,0,0),await new Promise(p=>setTimeout(p,0))}re=!1,M.x=0,M.y=0}function j(t=1,n=0,o=0){Te.clearRect(0,0,A,F),Te.save(),Te.translate(n,o),Te.scale(t,t),Te.drawImage(Ye,0,0),Te.restore()}R.addEventListener("mousedown",t=>{_=!0,he.x=t.clientX,he.y=t.clientY,V.x=fe,V.y=de,re||(M.x=0,M.y=0)});R.addEventListener("mousemove",t=>{_&&(M.x=t.clientX-he.x,M.y=t.clientY-he.y,j(1,M.x,M.y))});R.addEventListener("mouseup",t=>{_&&(re||(fe=V.x-M.x*L,de=V.y-M.y*L,M.x=0,M.y=0,me(),j()),_=!1)});R.addEventListener("mouseleave",()=>{_&&(re||(fe=V.x-M.x*L,de=V.y-M.y*L,M.x=0,M.y=0,me(),j()),_=!1)});let Lt=1,Tt=null;R.addEventListener("wheel",t=>{t.preventDefault();const n=t.deltaY<0?.9:1.1;L/=n,Lt*=n,j(Lt),Tt&&clearTimeout(Tt),Tt=setTimeout(()=>{Lt=1,me(),j()},300)});R.addEventListener("touchstart",t=>{t.preventDefault(),t.touches.length===1?(_=!0,he.x=t.touches[0].clientX,he.y=t.touches[0].clientY,V.x=fe,V.y=de,re||(M.x=0,M.y=0),Qe=!1):t.touches.length===2&&(_=!1,Qe=!0,Nn=Xn(t.touches[0],t.touches[1]),wt=jn(t.touches[0],t.touches[1]),Me=1,$e={x:0,y:0},ut=wt)});R.addEventListener("touchmove",t=>{if(t.preventDefault(),t.touches.length===1&&_)M.x=t.touches[0].clientX-he.x,M.y=t.touches[0].clientY-he.y,j(1,M.x,M.y);else if(t.touches.length===2&&Qe){const n=Xn(t.touches[0],t.touches[1]),o=jn(t.touches[0],t.touches[1]);Me=n/Nn,$e.x+=o.x-ut.x,$e.y+=o.y-ut.y,ut=o,j(Me,$e.x,$e.y)}});R.addEventListener("touchend",t=>{if(t.preventDefault(),_&&(re||(fe=V.x-M.x*L,de=V.y-M.y*L,M.x=0,M.y=0,me(),j()),_=!1),Qe&&t.touches.length<2){const n=wt.x-A/2,o=wt.y-F/2;L/=Me,fe+=n*(L-L*Me),de+=o*(L-L*Me),Me=1,$e={x:0,y:0},Qe=!1,me(),j()}});Yo.addEventListener("click",()=>{fe=0,de=0,L=4/A,me(),j()});window.addEventListener("resize",()=>{A=window.innerWidth,F=window.innerHeight,R.width=A,R.height=F,Ye.width=A,Ye.height=F,L=4/A,me(),j()});window.addEventListener("DOMContentLoaded",()=>{me(),j()});const Bn=document.getElementById("bgCanvas");if(!Bn)throw new Error("Canvas element with id 'bgCanvas' not found");const je=new Cn({canvas:Bn,alpha:!0,antialias:!0});je.setSize(window.innerWidth,window.innerHeight);je.setPixelRatio(window.devicePixelRatio);je.setClearColor(0,0);const nt=new In,Re=new Ln(60,window.innerWidth/window.innerHeight,.1,1e3);Re.position.set(0,8,15);window.addEventListener("resize",()=>{Re.aspect=window.innerWidth/window.innerHeight,Re.updateProjectionMatrix(),je.setSize(window.innerWidth,window.innerHeight)});nt.add(new ho(16777215,.5));const Hn=new mo(16777215,.8);Hn.position.set(5,10,7.5);nt.add(Hn);const Je=new bo(Re,je.domElement);Je.enablePan=!1;Je.enableZoom=!1;Je.target.set(0,0,0);let ft;const We=[[1,1,0,0],[1,-1,0,0],[-1,1,0,0],[-1,-1,0,0],[1,0,1,0],[1,0,-1,0],[-1,0,1,0],[-1,0,-1,0],[0,1,1,0],[0,1,-1,0],[0,-1,1,0],[0,-1,-1,0],[1,0,0,1],[1,0,0,-1],[-1,0,0,1],[-1,0,0,-1],[0,1,0,1],[0,1,0,-1],[0,-1,0,1],[0,-1,0,-1],[0,0,1,1],[0,0,1,-1],[0,0,-1,1],[0,0,-1,-1]],_t=[];function No(t,n){return t.reduce((o,e,a)=>o+(e-n[a])**2,0)}for(let t=0;t<We.length;t++)for(let n=t+1;n<We.length;n++)Math.abs(No(We[t],We[n])-2)<.01&&_t.push([t,n]);function Xo(t,n,o){const e=Array(4).fill(0).map(()=>Array(4).fill(0));for(let a=0;a<4;a++)e[a][a]=1;return e[t][t]=Math.cos(o),e[t][n]=-Math.sin(o),e[n][t]=Math.sin(o),e[n][n]=Math.cos(o),e}function jo(t,n){return t.map((o,e)=>o.reduce((a,s,c)=>a+s*n[c],0))}function Bo(t,n){const o=Array(4).fill(0).map(()=>Array(4).fill(0));for(let e=0;e<4;e++)for(let a=0;a<4;a++)for(let s=0;s<4;s++)o[e][a]+=t[e][s]*n[s][a];return o}function Ho(t){return t.reduce((n,o)=>Bo(n,o))}function Fo(t,n=6){const o=n-t[3],e=o<.1?.1:o;return new H(t[0]*n/e,t[1]*n/e,t[2]*n/e)}const Wt=[[0,1],[0,2],[0,3],[1,2],[1,3],[2,3]];let St=Wt.map(()=>0),_o=Wt.map(()=>(Math.random()*.001+3e-4)*(Math.random()<.5?1:-1)),ie,dt,bn;function Wo(){ft=new Bt,ie=new Float32Array(_t.length*2*3),dt=new Tn,dt.setAttribute("position",new Sn(ie,3));const t=new $n({color:16777215,transparent:!0,opacity:.15});bn=new Dn(dt,t),ft.add(bn),nt.add(ft)}function Go(){const t=Wt.map((e,a)=>Xo(e[0],e[1],St[a])),n=Ho(t),o=We.map(e=>Fo(jo(n,e)));_t.forEach((e,a)=>{const[s,c]=e,r=o[s],l=o[c];ie[a*6+0]=r.x,ie[a*6+1]=r.y,ie[a*6+2]=r.z,ie[a*6+3]=l.x,ie[a*6+4]=l.y,ie[a*6+5]=l.z}),dt.attributes.position.needsUpdate=!0,St=St.map((e,a)=>{let s=e+_o[a];return s>Math.PI*2?s-=Math.PI*2:s<0&&(s+=Math.PI*2),s})}Wo();const qo=document.getElementById("startBtn"),Uo=document.getElementById("resetBtn"),Ko=document.getElementById("score"),Zo=document.getElementById("highscore"),Vo=document.getElementById("lives");let pe=!1,Z=0,se=localStorage.getItem("hexgameHighscore")||0,N=3,et={a:0,b:0},k;const ke=20;let Y=new Bt;nt.add(Y);const Qo=Math.sqrt(3),$t=.5;let tt=new Map,Ae=new Map;const Ot="crystal",Yt="coin",Rt="bad",Ve=document.createElement("div");Ve.style.cssText=`
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    background-color: rgba(0, 0, 0, 0.7); color: white; padding: 20px;
    border-radius: 10px; text-align: center; font-family: sans-serif;
    display: none; z-index: 1000;
`;document.body.appendChild(Ve);function Jo(t){Ve.textContent=t,Ve.style.display="block",setTimeout(()=>{Ve.style.display="none"},3e3)}function ot(){Ko.textContent=Z,Zo.textContent=se,Vo.textContent=N}function at(t,n,o){const e=o*Qo*(t+n/2),a=o*(3/2*n);return[e,a]}function ea(t){if(t<2)return!1;if(t===2)return!0;if(t%2===0)return!1;const n=Math.floor(Math.sqrt(t));for(let o=3;o<=n;o+=2)if(t%o===0)return!1;return!0}function ta(t){if(t<2)return 0;let n=0;const o=Math.floor(Math.sqrt(t));for(let e=2;e<=o;e++)t%e===0&&(n++,e!==t/e&&n++);return n}function Fn(t,n){if(t===0&&n===0)return!1;const o=t*t-t*n+n*n;return o<=1?!1:ea(o)}function na(){if(!pe){for(pe=!0,console.log("Game started!"),Z=0,N=3;Y.children.length>0;)Y.remove(Y.children[0]);tt.clear(),Ae.clear(),ot(),aa(),sa(),ra()}}function oa(){for(pe=!1,console.log("Game reset!"),Z>se&&(se=Z,localStorage.setItem("hexgameHighscore",se)),Z=0,N=3;Y.children.length>0;)Y.remove(Y.children[0]);tt.clear(),Ae.clear(),ot()}function Dt(){pe=!1,Z>se&&(se=Z,localStorage.setItem("hexgameHighscore",se)),ot(),Jo(`Game Over!
Final Score: ${Z}
High Score: ${se}`)}function aa(){k&&Y.remove(k);const t=.5;k=ft.clone(),k.scale.set(t,t,t);const n=Math.floor(Math.random()*256)-128,o=Math.floor(Math.random()*256)-128;et={a:n,b:o};const[e,a]=at(n,o,ke);k.position.set(e,a,0),Y.add(k)}function ia(t,n,o){if(Math.random()<.01){const e=Math.random()<.1?Rt:Math.random()<.5?Ot:Yt;let a;const[s,c]=at(t,n,ke);if(e===Ot){const r=new go(2),l=new qe({color:65535,emissive:65535,emissiveIntensity:.5});a=new Ue(r,l)}else if(e===Yt){const r=new kn(2,2,.5,32),l=new qe({color:16776960,emissive:16776960,emissiveIntensity:.5});a=new Ue(r,l)}else if(e===Rt){const r=new yo(2,.5,16,100),l=new qe({color:16711680,emissive:16711680,emissiveIntensity:.5});a=new Ue(r,l)}a.position.set(s,c,o+5),Y.add(a),Ae.set(`${t},${n}`,{type:e,object:a})}}function sa(){for(let n=-128;n<=128;n++)for(let o=-128;o<=128;o++){const e=n*n-n*o+o*o;let a=$t,s=5592405,c=!1;if(Fn(n,o))a=$t*3,s=65280,c=!0;else if(e>1){const u=ta(e);a=$t/(u+1),s=11184810}if(tt.set(`${n},${o}`,{height:a,isPrime:c}),n===0&&o===0)continue;const[r,l]=at(n,o,ke),f=new kn(ke*.9,ke*.9,a,6),h=new qe({color:s}),p=new Ue(f,h);p.position.set(r,l,a/2),Y.add(p),ia(n,o,a)}}function ra(){const t=new Bt,n=150,o=1,e=10,a=new po(o,o,o),s=new qe({color:16777215,emissive:16711935,emissiveIntensity:.8});let c=0,r=0,l=1,f=0,h=0;for(let p=1;p<=n*n;p++){if(Fn(c,r)){const u=new Ue(a,s),[g,C]=at(c,r,o*2);u.position.set(g,C,e),t.add(u)}switch(h){case 0:c++;break;case 1:c++,r--;break;case 2:r--;break;case 3:c--;break;case 4:c--,r++;break;case 5:r++;break}(p===l||p===l+1)&&(f++,h=(h+1)%6,f%2===0&&(l+=1))}t.position.set(0,0,50),Y.add(t)}function la(t,n){const o=tt.get(`${et.a},${et.b}`),e=tt.get(`${t},${n}`);if(!e)return N--,console.log("Fell off the world! Lives remaining:",N),N<=0&&Dt(),!1;o&&o.isPrime&&e&&!e.isPrime&&(N--,console.log("Fell from a prime pillar! Lives remaining:",N),N<=0&&Dt());const a=`${t},${n}`;if(Ae.has(a)){const s=Ae.get(a);s.type===Ot?(Z+=100,console.log("Collected a crystal!")):s.type===Yt?(Z+=10,console.log("Collected a coin!")):s.type===Rt&&(N--,console.log("Collected a bad item! Lives remaining:",N),N<=0&&Dt()),Y.remove(s.object),Ae.delete(a)}return ot(),!0}function X(t){if(!pe)return;let{a:n,b:o}=et;const e={a:n,b:o};switch(t){case 0:e.a++;break;case 1:e.a++,e.b--;break;case 2:e.b--;break;case 3:e.a--;break;case 4:e.a--,e.b++;break;case 5:e.b++;break}if(la(e.a,e.b)){et=e;const[a,s]=at(e.a,e.b,ke);k.position.x=a,k.position.y=s}}window.addEventListener("keydown",t=>{if(pe)switch(t.key.toLowerCase()){case"d":X(0);break;case"q":X(2);break;case"z":X(4);break;case"a":X(3);break;case"e":X(1);break;case"x":X(5);break}});let ht,mt;const Mn=50;window.addEventListener("touchstart",t=>{ht=t.touches[0].clientX,mt=t.touches[0].clientY});window.addEventListener("touchend",t=>{if(!pe||!ht||!mt)return;const n=t.changedTouches[0].clientX,o=t.changedTouches[0].clientY,e=n-ht,a=o-mt;if(Math.abs(e)>Mn||Math.abs(a)>Mn){const s=Math.atan2(a,e);s>-Math.PI/6&&s<=Math.PI/6?X(0):s>Math.PI/6&&s<=Math.PI/2?X(5):s>Math.PI/2&&s<=5*Math.PI/6?X(4):s>5*Math.PI/6||s<=-5*Math.PI/6?X(3):s>-5*Math.PI/6&&s<=-Math.PI/2?X(2):s>-Math.PI/2&&s<=-Math.PI/6&&X(1)}ht=null,mt=null});qo.addEventListener("click",na);Uo.addEventListener("click",oa);ot();function ca(){if(!k)return;const t=new H(k.position.x,k.position.y-15,k.position.z+15);Re.position.lerp(t,.05),Je.target.copy(k.position),Je.update()}function _n(){requestAnimationFrame(_n),Go(),pe&&k&&(k.rotation.z+=.01,ca()),je.render(nt,Re)}_n();const ze=document.getElementById("dragArea"),zt=document.getElementById("fileInput"),kt=document.getElementById("uploadBtn"),De=document.getElementById("status"),xn=document.getElementById("cid");let le=null;const ua=wo({url:"https://ipfs.infura.io:5001/api/v0"});ze.addEventListener("dragover",t=>{t.preventDefault(),ze.classList.add("active")});ze.addEventListener("dragleave",()=>{ze.classList.remove("active")});ze.addEventListener("drop",t=>{t.preventDefault(),ze.classList.remove("active");const n=t.dataTransfer.files;n.length&&(zt.files=n,le=n[0],De.textContent=`${le.name} selected.`)});zt.addEventListener("change",()=>{le=zt.files[0],le&&(De.textContent=`${le.name} selected.`)});kt.onclick=async()=>{if(!le){De.textContent="Please select a file first.";return}kt.disabled=!0,De.textContent="Uploading...",xn.textContent="";try{const t=await ua.add(le,{wrapWithDirectory:!0});let n="";for await(const o of t)n=o.cid.toString();De.textContent="Upload complete!",xn.textContent=n}catch(t){De.textContent="Upload failed: "+t.message}finally{kt.disabled=!1,le=null}};const K=document.getElementById("ulamCanvas"),y=K.getContext("2d"),Be=document.getElementById("modeSelect");let te=0,ne=0,xe=20,w=1,T=0,S=0;const b=window.devicePixelRatio||1;let G=0,q=0;const En=.92;let oe=!1,it=0,st=0,Ne=0,Xe=0,bt=-1,pt=1;const ce=new Map,x=document.createElement("div");x.style.position="fixed";x.style.background="rgba(0,0,0,0.85)";x.style.color="#0f0";x.style.padding="6px 10px";x.style.borderRadius="5px";x.style.fontFamily="monospace";x.style.fontSize="13px";x.style.pointerEvents="none";x.style.whiteSpace="pre";x.style.display="none";x.style.zIndex=1e4;document.body.appendChild(x);const Se=new Map;function ue(t){if(t<2)return!1;if(Se.has(t))return Se.get(t);if(t===2)return Se.set(t,!0),!0;if(t%2===0)return Se.set(t,!1),!1;const n=Math.floor(Math.sqrt(t));for(let o=3;o<=n;o+=2)if(t%o===0)return Se.set(t,!1),!1;return Se.set(t,!0),!0}function Oe(t){if(t<2)return 0;let n=0;const o=Math.floor(Math.sqrt(t));for(let e=2;e<=o;e++)t%e===0&&(n++,e!==t/e&&n++);return n}function gt(t){const n=new Map;let o=t;for(let e=2;e*e<=o;e++)for(;o%e===0;)n.set(e,(n.get(e)||0)+1),o=Math.floor(o/e);return o>1&&n.set(o,(n.get(o)||0)+1),n}function At(t){if(!t||t.size===0)return"(none)";const n=[];for(const[o,e]of t.entries())n.push(e>1?`${o}^${e}`:`${o}`);return n.join(" × ")}function Wn(t){if(t<=2||t%2!==0)return 0;let n=0;for(let o=2;o<=t/2;o++)ue(o)&&ue(t-o)&&n++;return n}const fa=.6601618158;function da(t){if(t<=2||t%2!==0)return 1;const n=Math.log(t);if(n===0)return 1;let o=1;const e=gt(t);for(const[s]of e.entries())s>2&&(o*=(s-1)/(s-2));return 2*fa*(t/(n*n))*o}function Nt(t,n){if(t===0&&n===0)return 1;const o=Math.max(Math.abs(t),Math.abs(n)),e=2*o,a=(2*o+1)**2;let s;return n===o?s=a-(o-t):t===-o?s=a-e-(o-n):n===-o?s=a-2*e-(t+o):s=a-3*e-(n+o),s}function Xt(t,n){const o=Math.abs(t),e=Math.abs(n);return o===0&&e===0?!1:o===0?ue(e)&&e%4===3:e===0?ue(o)&&o%4===3:ue(o*o+e*e)}function jt(t,n){if(t===0&&n===0)return!1;const o=t*t-t*n+n*n;return o<=1?!1:ue(o)}const Gt=Math.sqrt(3);function yt(t,n,o){const e=o*Gt*(t+n/2),a=o*(3/2*n);return[e,a]}function Ge(t,n,o){const e=.6666666666666666*n/o,s=t/(o*Gt)-e/2,c=e,r=-s-c;let l=Math.round(s),f=Math.round(r),h=Math.round(c);const p=Math.abs(l-s),u=Math.abs(f-r),g=Math.abs(h-c);return p>u&&p>g?l=-f-h:u>g?f=-l-h:h=-l-f,[l,h]}function vn(t,n,o,e,a,s,c){t.beginPath();for(let r=0;r<6;r++){const l=Math.PI/6+r*Math.PI/3,f=e*Math.cos(l),h=e*Math.sin(l);r===0?t.moveTo(n+f,o+h):t.lineTo(n+f,o+h)}t.closePath(),a&&(t.fillStyle=a,t.fill()),s&&(t.strokeStyle=s,t.lineWidth=c,t.stroke())}function Pn(t,n){const e=Be.value.toLowerCase();if(e.includes("-comet")){let a;if(e.startsWith("ulam-")?a=Nt(t,n):e.startsWith("gauss-")?a=t*t+n*n:a=t*t-t*n+n*n,a<=2||a%2!==0)return"rgba(20, 20, 20, 1)";const s=Wn(a),c=Math.log(a),l=240-s/(a/c**2)*120;return`hsl(${Math.max(0,Math.min(240,l))}, 90%, 55%)`}if(e.includes("ulam-")){const a=Nt(t,n);if(e==="ulam-green")return ue(a)?"#00ff00":"transparent";if(a===1)return"black";if(ue(a))return"#ffffff";const s=Oe(a);let c=Math.max(0,255-s*12);return c=Math.min(255,c),`rgb(${c},${Math.floor(c/2)},0)`}else if(e.includes("gauss-")){const a=t,s=n,c=a*a+s*s;if(e==="gauss-green")return Xt(a,s)?"#00ff00":"transparent";{if(Xt(a,s))return"#ffffff";if(c<=1)return"black";const r=Oe(c);let l=Math.max(0,255-r*12);return l=Math.min(255,l),`rgb(${l},${Math.floor(l/2)},0)`}}else if(e.includes("eisen")){const a=t,s=n,c=a*a-a*s+s*s;if(e.includes("eisen-green"))return jt(a,s)?"#00ff00":"transparent";{if(jt(a,s))return"#ffffff";if(c<=1)return"black";const r=Oe(c);let l=Math.max(0,255-r*12);return l=Math.min(255,l),`rgb(${l},${Math.floor(l/2)},0)`}}return"transparent"}const ae=5,Gn=.05,qn=12;function Ee(){ce.clear();const t=Be.value,n=t.toLowerCase().includes("eisen"),o=-T/w,e=(te-T)/w,a=-S/w,s=(ne-S)/w;if(n){const c=xe,r=c*Gt,l=c*2,[f,h]=Ge(o,a,c),[p,u]=Ge(e,a,c),[g,C]=Ge(o,s,c),[v,E]=Ge(e,s,c),$=Math.min(f,p,g,v)-ae,z=Math.max(f,p,g,v)+ae,O=Math.min(h,u,C,E)-ae,Q=Math.max(h,u,C,E)+ae;for(let m=Math.floor(O);m<=Math.ceil(Q);m++)for(let D=Math.floor($);D<=Math.ceil(z);D++){const[rt,ge]=yt(D,m,c);if(rt>o-r&&rt<e+r&&ge>a-l&&ge<s+l){const ye=`${D},${m}`;let we,He,Fe;He=D*D-D*m+m*m,we=`${D}${m>=0?"+":""}${m}ω`,Fe=Pn(D,m),ce.set(ye,{x:D,y:m,label:we,value:He,color:Fe})}}}else{const c=xe,r=c,l=Math.floor(o/c)-ae,f=Math.ceil(e/c)+ae,h=Math.floor(a/r)-ae,p=Math.ceil(s/r)+ae;for(let u=h;u<=p;u++)for(let g=l;g<=f;g++){const C=`${g},${u}`;let v,E,$;t.toLowerCase().includes("ulam-")?(E=Nt(g,u),v=String(E)):(E=g*g+u*u,v=`${g}${u>=0?"+":""}${u}i`),$=Pn(g,u),ce.set(C,{x:g,y:u,label:v,value:E,color:$})}}}function ve(){y.clearRect(0,0,te*b,ne*b),y.save(),y.translate(T,S),y.scale(w,w);const n=Be.value.toLowerCase();if(n.includes("gauss-"))y.strokeStyle="#666",y.lineWidth=1/w,y.beginPath(),y.moveTo(-te/w,0),y.lineTo(te/w,0),y.moveTo(0,-ne/w),y.lineTo(0,ne/w),y.stroke();else if(n.includes("eisen")){y.strokeStyle="#666",y.lineWidth=1/w,y.beginPath();const o=Math.max(te,ne)/w,[e,a]=yt(o,0,1);y.moveTo(-e,-a),y.lineTo(e,a);const[s,c]=yt(0,o,1);y.moveTo(-s,-c),y.lineTo(s,c),y.stroke()}if(n.includes("eisen")){const o=xe;for(const e of ce.values()){const[a,s]=yt(e.x,e.y,o);e.color!=="transparent"&&vn(y,a,s,o,e.color,null,null),vn(y,a,s,o,null,"rgba(0,0,0,0.2)",1/w)}}else{const o=xe;for(const e of ce.values())e.color!=="transparent"&&(y.fillStyle=e.color,y.fillRect(e.x*o,e.y*o,o,o),y.strokeStyle="rgba(0,0,0,0.2)",y.lineWidth=1/w,y.strokeRect(e.x*o,e.y*o,o,o))}y.restore()}function Un(){oe||(Math.abs(G)>.1||Math.abs(q)>.1?(T+=G,S+=q,G*=En,q*=En,Ee(),ve()):Math.abs(G)<=.1&&Math.abs(q)<=.1&&(G!==0||q!==0)&&(G=0,q=0)),requestAnimationFrame(Un)}function ha(t,n){const o=Be.value,e=(t/b-T)/w,a=(n/b-S)/w;if(o.toLowerCase().includes("eisen")){const[c,r]=Ge(e,a,xe),l=`${c},${r}`;return ce.get(l)}else{const c=Math.floor(e/xe),r=Math.floor(a/xe);return ce.get(`${c},${r}`)}}function ma(t){if(oe){x.style.display="none";const r=t.clientX-it,l=t.clientY-st;T=Ne+r*b,S=Xe+l*b,G=t.movementX*b,q=t.movementY*b,Ee(),ve();return}const n=ha(t.clientX*b,t.clientY*b);if(!n){x.style.display="none";return}const o=Be.value;let e="";if(o.toLowerCase().includes("-comet")){const r=n.value;let l=`n = ${r}`;if(o.startsWith("gauss-")?l=`${n.x}${n.y>=0?"+":""}${n.y}i
Norm = ${r}`:o.startsWith("eisen-")&&(l=`${n.x}${n.y>=0?"+":""}${n.y}ω
Norm = ${r}`),r<=2||r%2!==0)e=`${l}
(Odd or too small)`;else{const f=Wn(r),h=da(r),p=h>.1?f/h:0;e=`${l}
Goldbach Pairs: ${f}
Heuristic: ${h.toFixed(2)}
Ratio: ${p.toFixed(2)}`}}else if(o.toLowerCase().includes("ulam-")){const r=n.value,l=Oe(r),f=At(gt(r));e=`n = ${r}
Factors (excluding 1,n): ${l}
Prime factorization:
${f}`}else if(o.toLowerCase().includes("gauss-")){const r=n.x,l=n.y,f=n.value,h=Xt(r,l)?"Yes":"No",p=Oe(f),u=At(gt(f));e=`${r}${l>=0?"+":""}${l}i
Gaussian prime: ${h}
Norm = ${f}
Norm factors (excl 1,norm): ${p}
Prime factorization of norm:
${u}`}else if(o.toLowerCase().includes("eisen")){const r=n.x,l=n.y,f=n.value,h=jt(r,l)?"Yes":"No",p=Oe(f),u=At(gt(f));e=`${r}${l>=0?"+":""}${l}ω
Eisenstein prime: ${h}
Norm = ${f}
Norm factors (excl 1,norm): ${p}
Prime factorization of norm:
${u}`}x.textContent=e,x.style.display="block";const a=12;let s=t.clientX+a,c=t.clientY+a;s+x.offsetWidth>window.innerWidth&&(s=t.clientX-x.offsetWidth-a),c+x.offsetHeight>window.innerHeight&&(c=t.clientY-x.offsetHeight-a),x.style.left=`${s}px`,x.style.top=`${c}px`}function pa(t){t.preventDefault();const n=t.clientX*b,o=t.clientY*b,e=-t.deltaY*.001;let a=w*(1+e);a=Math.min(Math.max(a,Gn),qn);const s=(n-T)/w,c=(o-S)/w;T-=s*a-s*w,S-=c*a-c*w,w=a,Ee(),ve()}function ga(t){oe=!0,it=t.clientX,st=t.clientY,Ne=T,Xe=S,G=0,q=0,K.style.cursor="grabbing",x.style.display="none"}function ya(){oe=!1,K.style.cursor="grab"}function wa(t){if(t.preventDefault(),t.touches.length===2){const n=t.touches[0],o=t.touches[1];bt=Math.hypot(o.clientX-n.clientX,o.clientY-n.clientY),pt=w,oe=!1,x.style.display="none"}else t.touches.length===1&&(oe=!0,it=t.touches[0].clientX,st=t.touches[0].clientY,Ne=T,Xe=S,G=0,q=0,x.style.display="none")}function ba(t){if(t.preventDefault(),t.touches.length===2&&bt>0){const n=t.touches[0],o=t.touches[1],e=Math.hypot(o.clientX-n.clientX,o.clientY-n.clientY),a=pt*(e/bt);w=Math.min(Math.max(a,Gn),qn);const s=(n.clientX+o.clientX)/2,c=(n.clientY+o.clientY)/2,r=(s*b-Ne)/pt,l=(c*b-Xe)/pt,f=(s*b-T)/w,h=(c*b-S)/w;T+=(f-r)*w,S+=(h-l)*w,Ee(),ve()}else if(oe&&t.touches.length===1){const n=t.touches[0].clientX-it,o=t.touches[0].clientY-st;T=Ne+n*b,S=Xe+o*b,t.touches[0].previousClientX!==void 0&&(G=(t.touches[0].clientX-t.touches[0].previousClientX)*b,q=(t.touches[0].clientY-t.touches[0].previousClientY)*b),Ee(),ve()}}function Ma(t){bt=-1,t.touches.length===0?oe=!1:t.touches.length===1&&(oe=!0,it=t.touches[0].clientX,st=t.touches[0].clientY,Ne=T,Xe=S)}function Kn(){te=window.innerWidth,ne=window.innerHeight,K.style.width=`${te}px`,K.style.height=`${ne}px`,K.width=te*b,K.height=ne*b,y.setTransform(b,0,0,b,0,0),T===0&&S===0&&(T=te*b/2,S=ne*b/2),Ee(),ve()}Be.addEventListener("change",()=>{ce.clear(),Ee(),ve()});K.addEventListener("wheel",pa,{passive:!1});K.addEventListener("mousedown",ga);window.addEventListener("mousemove",ma);window.addEventListener("mouseup",ya);K.addEventListener("touchstart",wa,{passive:!1});window.addEventListener("touchmove",ba,{passive:!1});window.addEventListener("touchend",Ma);window.addEventListener("resize",Kn);Kn();Un();
//# sourceMappingURL=main.js.map
