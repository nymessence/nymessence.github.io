{"version":3,"file":"fractal2.js","sources":["../../assets/fractal2.js"],"sourcesContent":["const a=document.getElementById(\"fractalCanvas\"),I=a.getContext(\"2d\"),S=document.getElementById(\"funcInput\"),U=document.getElementById(\"cReal\"),Z=document.getElementById(\"cImag\"),_=document.getElementById(\"iterations\"),$=document.getElementById(\"gradient\"),ee=document.getElementById(\"resetView\");let c=window.innerWidth,u=window.innerHeight;a.width=c;a.height=u;let g=0,v=0,o=4/c,r=!1,f={x:0,y:0},n={x:0,y:0},d={x:0,y:0},x=!1;const Y=document.createElement(\"canvas\"),O=Y.getContext(\"2d\");Y.width=c;Y.height=u;let M=!1,V=0,H=null,p=1,L={x:0,y:0},F=null;function A(e,t){const l=t.clientX-e.clientX,h=t.clientY-e.clientY;return Math.sqrt(l*l+h*h)}function G(e,t){return{x:(e.clientX+t.clientX)/2,y:(e.clientY+t.clientY)/2}}function te(e){try{let t=e.replace(/\\^/g,\"**\");return math.compile(t)}catch(t){return alert(\"Invalid formula: \"+t),null}}function P(e){e=e.replace(\"#\",\"\"),e.length===3&&(e=e.split(\"\").map(l=>l+l).join(\"\"));const t=parseInt(e,16);return[t>>16&255,t>>8&255,t&255]}function ne(e,t){let l=[];for(let h=0;h<t;h++){let X=h/(t-1)*(e.length-1),D=Math.floor(X),B=Math.min(D+1,e.length-1),y=X-D,m=P(e[D]),s=P(e[B]);l.push([Math.round(m[0]+y*(s[0]-m[0])),Math.round(m[1]+y*(s[1]-m[1])),Math.round(m[2]+y*(s[2]-m[2]))])}return l}async function w(){x=!0;const e=te(S.value);if(!e){x=!1;return}const t=parseFloat(U.value),l=parseFloat(Z.value),h=parseInt(_.value),X=$.value.split(\",\").map(s=>s.trim()),D=ne(X,h+1),B=O.createImageData(c,u),y=B.data,m=50;for(let s=0;s<u;s+=m){const J=Math.min(s+m,u);for(let E=s;E<J;E++)for(let C=0;C<c;C++){let K=g+(C-c/2)*o,N=v+(E-u/2)*o,T=K,k=N,R=0;for(;R<h;){let Q={z:math.complex(T,k),c:math.complex(t,l)},q=e.evaluate(Q);if(T=q.re,k=q.im,T*T+k*k>4)break;R++}let W=D[R]||[0,0,0],z=4*(E*c+C);y[z]=W[0],y[z+1]=W[1],y[z+2]=W[2],y[z+3]=255}O.putImageData(B,0,0),await new Promise(E=>setTimeout(E,0))}x=!1,n.x=0,n.y=0}function i(e=1,t=0,l=0){I.clearRect(0,0,c,u),I.save(),I.translate(t,l),I.scale(e,e),I.drawImage(Y,0,0),I.restore()}a.addEventListener(\"mousedown\",e=>{r=!0,f.x=e.clientX,f.y=e.clientY,d.x=g,d.y=v,x||(n.x=0,n.y=0)});a.addEventListener(\"mousemove\",e=>{r&&(n.x=e.clientX-f.x,n.y=e.clientY-f.y,i(1,n.x,n.y))});a.addEventListener(\"mouseup\",e=>{r&&(x||(g=d.x-n.x*o,v=d.y-n.y*o,n.x=0,n.y=0,w(),i()),r=!1)});a.addEventListener(\"mouseleave\",()=>{r&&(x||(g=d.x-n.x*o,v=d.y-n.y*o,n.x=0,n.y=0,w(),i()),r=!1)});let b=1,j=null;a.addEventListener(\"wheel\",e=>{e.preventDefault();const t=e.deltaY<0?.9:1.1;o/=t,b*=t,i(b),j&&clearTimeout(j),j=setTimeout(()=>{b=1,w(),i()},300)});a.addEventListener(\"touchstart\",e=>{e.preventDefault(),e.touches.length===1?(r=!0,f.x=e.touches[0].clientX,f.y=e.touches[0].clientY,d.x=g,d.y=v,x||(n.x=0,n.y=0),M=!1):e.touches.length===2&&(r=!1,M=!0,V=A(e.touches[0],e.touches[1]),H=G(e.touches[0],e.touches[1]),p=1,L={x:0,y:0},F=H)});a.addEventListener(\"touchmove\",e=>{if(e.preventDefault(),e.touches.length===1&&r)n.x=e.touches[0].clientX-f.x,n.y=e.touches[0].clientY-f.y,i(1,n.x,n.y);else if(e.touches.length===2&&M){const t=A(e.touches[0],e.touches[1]),l=G(e.touches[0],e.touches[1]);p=t/V,L.x+=l.x-F.x,L.y+=l.y-F.y,F=l,i(p,L.x,L.y)}});a.addEventListener(\"touchend\",e=>{if(e.preventDefault(),r&&(x||(g=d.x-n.x*o,v=d.y-n.y*o,n.x=0,n.y=0,w(),i()),r=!1),M&&e.touches.length<2){const t=H.x-c/2,l=H.y-u/2;o/=p,g+=t*(o-o*p),v+=l*(o-o*p),p=1,L={x:0,y:0},M=!1,w(),i()}});ee.addEventListener(\"click\",()=>{g=0,v=0,o=4/c,w(),i()});window.addEventListener(\"resize\",()=>{c=window.innerWidth,u=window.innerHeight,a.width=c,a.height=u,Y.width=c,Y.height=u,o=4/c,w(),i()});window.addEventListener(\"DOMContentLoaded\",()=>{w(),i()});\n//# sourceMappingURL=fractal2.js.map\n"],"names":["a","ee","c","u","g","v","o","r","f","Y","M","e","t","te","ne","X","D","B","s"],"mappings":"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"}