import{z as k,R as H,O as N,U as O,V as U,L as W,P as R,I as V}from"./three.module2.js";const c=[[1,1,0,0],[1,-1,0,0],[-1,1,0,0],[-1,-1,0,0],[1,0,1,0],[1,0,-1,0],[-1,0,1,0],[-1,0,-1,0],[0,1,1,0],[0,1,-1,0],[0,-1,1,0],[0,-1,-1,0],[1,0,0,1],[1,0,0,-1],[-1,0,0,1],[-1,0,0,-1],[0,1,0,1],[0,1,0,-1],[0,-1,0,1],[0,-1,0,-1],[0,0,1,1],[0,0,1,-1],[0,0,-1,1],[0,0,-1,-1]],f=[];function j(e,n){let a=0;for(let t=0;t<4;t++){const o=e[t]-n[t];a+=o*o}return a}for(let e=0;e<c.length;e++)for(let n=e+1;n<c.length;n++)Math.abs(j(c[e],c[n])-2)<.01&&f.push([e,n]);function D(e,n,a){const t=Array(4).fill(0).map(()=>Array(4).fill(0));for(let o=0;o<4;o++)t[o][o]=1;return t[e][e]=Math.cos(a),t[e][n]=-Math.sin(a),t[n][e]=Math.sin(a),t[n][n]=Math.cos(a),t}function G(e,n){const a=[0,0,0,0];for(let t=0;t<4;t++)for(let o=0;o<4;o++)a[t]+=e[t][o]*n[o];return a}function J(e,n){const a=Array(4).fill(0).map(()=>Array(4).fill(0));for(let t=0;t<4;t++)for(let o=0;o<4;o++)for(let r=0;r<4;r++)a[t][o]+=e[t][r]*n[r][o];return a}function K(e){let n=e[0];for(let a=1;a<e.length;a++)n=J(n,e[a]);return n}const Q=5,y=7;function T(e,n=Q){let a=n-e[3];return a<.1&&(a=.1),new V(e[0]*n/a*y,e[1]*n/a*y,e[2]*n/a*y)}const X=[[0,1],[0,2],[0,3],[1,2],[1,3],[2,3]];let l=[0,0,0,0,0,0],L=[];for(let e=0;e<6;e++)L[e]=(Math.random()*.001+3e-4)*(Math.random()<.5?1:-1);window.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("bgCanvas"),n=new k({canvas:e,alpha:!0});n.setSize(window.innerWidth,window.innerHeight),n.setClearColor(0,0);const a=new H,t=new N(45,window.innerWidth/window.innerHeight,.1,1e3);t.position.set(0,0,8),t.fov=60,t.updateProjectionMatrix(),window.addEventListener("resize",()=>{n.setSize(window.innerWidth,window.innerHeight),t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix()});const o=new Float32Array(f.length*2*3),r=new O;r.setAttribute("position",new U(o,3));const m=new W({color:16777215,opacity:.8,transparent:!0}),C=new R(r,m);a.add(C);function q(p){const w=c.map(i=>T(G(p,i)));for(let i=0;i<f.length;i++){const[h,F]=f[i],b=w[h],g=w[F];o[i*6+0]=b.x,o[i*6+1]=b.y,o[i*6+2]=b.z,o[i*6+3]=g.x,o[i*6+4]=g.y,o[i*6+5]=g.z}r.attributes.position.needsUpdate=!0}function I(){requestAnimationFrame(I);const p=X.map((i,h)=>D(i[0],i[1],l[h])),w=K(p);q(w);for(let i=0;i<l.length;i++)l[i]+=L[i],l[i]>Math.PI*2?l[i]-=Math.PI*2:l[i]<0&&(l[i]+=Math.PI*2);n.render(a,t)}I()});const P=window.AudioContext||window.webkitAudioContext;let s=null,d=null,u=null;const B=document.getElementById("presetSelect"),S=document.getElementById("baseFreq"),x=document.getElementById("binauralFreq"),M=document.getElementById("playBtn"),E=document.getElementById("stopBtn"),z=document.getElementById("silentAudio"),v={delta:{binaural:2.25,base:100},theta:{binaural:6,base:200},alpha:{binaural:10.5,base:400},beta:{binaural:21.5,base:500},gamma:{binaural:35,base:600}};B.addEventListener("change",()=>{const e=B.value;e&&v[e]&&(S.value=v[e].base,x.value=v[e].binaural)});function A(e,n){const a=s.createOscillator();a.type="sine",a.frequency.value=e;const t=s.createGain();t.gain.value=.5;const o=s.createStereoPanner();return o.pan.value=n,a.connect(t).connect(o).connect(s.destination),{osc:a,gainNode:t,panner:o}}function Y(){s||(s=new P),s.state==="suspended"&&s.resume();const e=Number(S.value),n=Number(x.value);if(e<30||e>1e3||n<.5||n>40){alert("Frequencies out of range");return}const a=e,t=e+n,o=A(a,-1),r=A(t,1);d=o.osc,u=r.osc,d.start(),u.start(),z.play().catch(m=>console.error("Silent audio playback failed:",m)),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:"Binaural Beats",artist:"Nymessence"})),M.disabled=!0,E.disabled=!1}function Z(){d&&d.stop(),u&&u.stop(),d=null,u=null,z.pause(),M.disabled=!1,E.disabled=!0}M.addEventListener("click",()=>{s||(s=new P),Y()});E.addEventListener("click",()=>{Z()});
//# sourceMappingURL=binaural2.js.map
