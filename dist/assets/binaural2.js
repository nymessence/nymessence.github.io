import{W as j,S as W,P as k,B as z,a as G,L as H,b as N,V as O}from"./three.module.js";const c=[[1,1,0,0],[1,-1,0,0],[-1,1,0,0],[-1,-1,0,0],[1,0,1,0],[1,0,-1,0],[-1,0,1,0],[-1,0,-1,0],[0,1,1,0],[0,1,-1,0],[0,-1,1,0],[0,-1,-1,0],[1,0,0,1],[1,0,0,-1],[-1,0,0,1],[-1,0,0,-1],[0,1,0,1],[0,1,0,-1],[0,-1,0,1],[0,-1,0,-1],[0,0,1,1],[0,0,1,-1],[0,0,-1,1],[0,0,-1,-1]],m=[];function R(e,t){let a=0;for(let n=0;n<4;n++){const o=e[n]-t[n];a+=o*o}return a}for(let e=0;e<c.length;e++)for(let t=e+1;t<c.length;t++)Math.abs(R(c[e],c[t])-2)<.01&&m.push([e,t]);function V(e,t,a){const n=Array(4).fill(0).map(()=>Array(4).fill(0));for(let o=0;o<4;o++)n[o][o]=1;return n[e][e]=Math.cos(a),n[e][t]=-Math.sin(a),n[t][e]=Math.sin(a),n[t][t]=Math.cos(a),n}function U(e,t){const a=[0,0,0,0];for(let n=0;n<4;n++)for(let o=0;o<4;o++)a[n]+=e[n][o]*t[o];return a}function J(e,t){const a=Array(4).fill(0).map(()=>Array(4).fill(0));for(let n=0;n<4;n++)for(let o=0;o<4;o++)for(let r=0;r<4;r++)a[n][o]+=e[n][r]*t[r][o];return a}function K(e){let t=e[0];for(let a=1;a<e.length;a++)t=J(t,e[a]);return t}const Q=5,y=7;function T(e,t=Q){let a=t-e[3];return a<.1&&(a=.1),new O(e[0]*t/a*y,e[1]*t/a*y,e[2]*t/a*y)}const X=[[0,1],[0,2],[0,3],[1,2],[1,3],[2,3]];let l=[0,0,0,0,0,0],x=[];for(let e=0;e<6;e++)x[e]=(Math.random()*.001+3e-4)*(Math.random()<.5?1:-1);window.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("bgCanvas"),t=new j({canvas:e,alpha:!0});t.setSize(window.innerWidth,window.innerHeight),t.setClearColor(0,0);const a=new W,n=new k(45,window.innerWidth/window.innerHeight,.1,1e3);n.position.set(0,0,8),n.fov=60,n.updateProjectionMatrix(),window.addEventListener("resize",()=>{t.setSize(window.innerWidth,window.innerHeight),n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix()});const o=new Float32Array(m.length*2*3),r=new z;r.setAttribute("position",new G(o,3));const p=new H({color:16777215,opacity:.8,transparent:!0}),C=new N(r,p);a.add(C);function P(w){const f=c.map(i=>T(U(w,i)));for(let i=0;i<m.length;i++){const[g,D]=m[i],b=f[g],h=f[D];o[i*6+0]=b.x,o[i*6+1]=b.y,o[i*6+2]=b.z,o[i*6+3]=h.x,o[i*6+4]=h.y,o[i*6+5]=h.z}r.attributes.position.needsUpdate=!0}function A(){requestAnimationFrame(A);const w=X.map((i,g)=>V(i[0],i[1],l[g])),f=K(w);P(f);for(let i=0;i<l.length;i++)l[i]+=x[i],l[i]>Math.PI*2?l[i]-=Math.PI*2:l[i]<0&&(l[i]+=Math.PI*2);t.render(a,n)}A()});const E=window.AudioContext||window.webkitAudioContext;let s=null,u=null,d=null;const S=document.getElementById("presetSelect"),I=document.getElementById("baseFreq"),F=document.getElementById("binauralFreq"),B=document.getElementById("playBtn"),v=document.getElementById("stopBtn"),L=document.getElementById("silentAudio"),M={delta:{binaural:2.25,base:100},theta:{binaural:6,base:200},alpha:{binaural:10.5,base:400},beta:{binaural:21.5,base:500},gamma:{binaural:35,base:600}};S.addEventListener("change",()=>{const e=S.value;e&&M[e]&&(I.value=M[e].base,F.value=M[e].binaural)});function q(e,t){const a=s.createOscillator();a.type="sine",a.frequency.value=e;const n=s.createGain();n.gain.value=.5;const o=s.createStereoPanner();return o.pan.value=t,a.connect(n).connect(o).connect(s.destination),{osc:a,gainNode:n,panner:o}}function Y(){s||(s=new E),s.state==="suspended"&&s.resume();const e=Number(I.value),t=Number(F.value);if(e<30||e>1e3||t<.5||t>40){alert("Frequencies out of range");return}const a=e,n=e+t,o=q(a,-1),r=q(n,1);u=o.osc,d=r.osc,u.start(),d.start(),L.play().catch(p=>console.error("Silent audio playback failed:",p)),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:"Binaural Beats",artist:"Nymessence"})),B.disabled=!0,v.disabled=!1}function Z(){u&&u.stop(),d&&d.stop(),u=null,d=null,L.pause(),B.disabled=!1,v.disabled=!0}B.addEventListener("click",()=>{s||(s=new E),Y()});v.addEventListener("click",()=>{Z()});
//# sourceMappingURL=binaural2.js.map
