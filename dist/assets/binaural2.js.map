{"version":3,"file":"binaural2.js","sources":["../../assets/binaural2.js"],"sourcesContent":["import{W as j,S as W,P as k,B as z,a as G,L as H,b as N,V as O}from\"./three.module.js\";const c=[[1,1,0,0],[1,-1,0,0],[-1,1,0,0],[-1,-1,0,0],[1,0,1,0],[1,0,-1,0],[-1,0,1,0],[-1,0,-1,0],[0,1,1,0],[0,1,-1,0],[0,-1,1,0],[0,-1,-1,0],[1,0,0,1],[1,0,0,-1],[-1,0,0,1],[-1,0,0,-1],[0,1,0,1],[0,1,0,-1],[0,-1,0,1],[0,-1,0,-1],[0,0,1,1],[0,0,1,-1],[0,0,-1,1],[0,0,-1,-1]],m=[];function R(e,t){let a=0;for(let n=0;n<4;n++){const o=e[n]-t[n];a+=o*o}return a}for(let e=0;e<c.length;e++)for(let t=e+1;t<c.length;t++)Math.abs(R(c[e],c[t])-2)<.01&&m.push([e,t]);function V(e,t,a){const n=Array(4).fill(0).map(()=>Array(4).fill(0));for(let o=0;o<4;o++)n[o][o]=1;return n[e][e]=Math.cos(a),n[e][t]=-Math.sin(a),n[t][e]=Math.sin(a),n[t][t]=Math.cos(a),n}function U(e,t){const a=[0,0,0,0];for(let n=0;n<4;n++)for(let o=0;o<4;o++)a[n]+=e[n][o]*t[o];return a}function J(e,t){const a=Array(4).fill(0).map(()=>Array(4).fill(0));for(let n=0;n<4;n++)for(let o=0;o<4;o++)for(let r=0;r<4;r++)a[n][o]+=e[n][r]*t[r][o];return a}function K(e){let t=e[0];for(let a=1;a<e.length;a++)t=J(t,e[a]);return t}const Q=5,y=7;function T(e,t=Q){let a=t-e[3];return a<.1&&(a=.1),new O(e[0]*t/a*y,e[1]*t/a*y,e[2]*t/a*y)}const X=[[0,1],[0,2],[0,3],[1,2],[1,3],[2,3]];let l=[0,0,0,0,0,0],x=[];for(let e=0;e<6;e++)x[e]=(Math.random()*.001+3e-4)*(Math.random()<.5?1:-1);window.addEventListener(\"DOMContentLoaded\",()=>{const e=document.getElementById(\"bgCanvas\"),t=new j({canvas:e,alpha:!0});t.setSize(window.innerWidth,window.innerHeight),t.setClearColor(0,0);const a=new W,n=new k(45,window.innerWidth/window.innerHeight,.1,1e3);n.position.set(0,0,8),n.fov=60,n.updateProjectionMatrix(),window.addEventListener(\"resize\",()=>{t.setSize(window.innerWidth,window.innerHeight),n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix()});const o=new Float32Array(m.length*2*3),r=new z;r.setAttribute(\"position\",new G(o,3));const p=new H({color:16777215,opacity:.8,transparent:!0}),C=new N(r,p);a.add(C);function P(w){const f=c.map(i=>T(U(w,i)));for(let i=0;i<m.length;i++){const[g,D]=m[i],b=f[g],h=f[D];o[i*6+0]=b.x,o[i*6+1]=b.y,o[i*6+2]=b.z,o[i*6+3]=h.x,o[i*6+4]=h.y,o[i*6+5]=h.z}r.attributes.position.needsUpdate=!0}function A(){requestAnimationFrame(A);const w=X.map((i,g)=>V(i[0],i[1],l[g])),f=K(w);P(f);for(let i=0;i<l.length;i++)l[i]+=x[i],l[i]>Math.PI*2?l[i]-=Math.PI*2:l[i]<0&&(l[i]+=Math.PI*2);t.render(a,n)}A()});const E=window.AudioContext||window.webkitAudioContext;let s=null,u=null,d=null;const S=document.getElementById(\"presetSelect\"),I=document.getElementById(\"baseFreq\"),F=document.getElementById(\"binauralFreq\"),B=document.getElementById(\"playBtn\"),v=document.getElementById(\"stopBtn\"),L=document.getElementById(\"silentAudio\"),M={delta:{binaural:2.25,base:100},theta:{binaural:6,base:200},alpha:{binaural:10.5,base:400},beta:{binaural:21.5,base:500},gamma:{binaural:35,base:600}};S.addEventListener(\"change\",()=>{const e=S.value;e&&M[e]&&(I.value=M[e].base,F.value=M[e].binaural)});function q(e,t){const a=s.createOscillator();a.type=\"sine\",a.frequency.value=e;const n=s.createGain();n.gain.value=.5;const o=s.createStereoPanner();return o.pan.value=t,a.connect(n).connect(o).connect(s.destination),{osc:a,gainNode:n,panner:o}}function Y(){s||(s=new E),s.state===\"suspended\"&&s.resume();const e=Number(I.value),t=Number(F.value);if(e<30||e>1e3||t<.5||t>40){alert(\"Frequencies out of range\");return}const a=e,n=e+t,o=q(a,-1),r=q(n,1);u=o.osc,d=r.osc,u.start(),d.start(),L.play().catch(p=>console.error(\"Silent audio playback failed:\",p)),\"mediaSession\"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:\"Binaural Beats\",artist:\"Nymessence\"})),B.disabled=!0,v.disabled=!1}function Z(){u&&u.stop(),d&&d.stop(),u=null,d=null,L.pause(),B.disabled=!1,v.disabled=!0}B.addEventListener(\"click\",()=>{s||(s=new E),Y()});v.addEventListener(\"click\",()=>{Z()});\n//# sourceMappingURL=binaural2.js.map\n"],"names":["m","R","t","n","V","U","O","x","j","W","k","z","G","p","H","N","P","w","f","g","D","h","A","E","u","d","S","I","F","B","v","L","M","q"],"mappings":"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"}